<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>PaidUsersBLMockTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Bets (1 oct 2021 16:36:53)</a> &gt; <a href="../../index.html" class="el_group">Bets</a> &gt; <a href="../index.html" class="el_bundle">src/test/java</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">PaidUsersBLMockTest.java</span></div><h1>PaidUsersBLMockTest.java</h1><pre class="source lang-java linenums">import static org.junit.jupiter.api.Assertions.*;

import java.util.ArrayList;
import java.util.Vector;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import businessLogic.BLFacade;
import businessLogic.BLFacadeImplementation;
import dataAccess.DataAccess;
import domain.Event;
import domain.Forecast;
import domain.Question;

<span class="fc" id="L18">class PaidUsersBLMockTest {</span>
<span class="fc" id="L19">	DataAccess dataAccess = Mockito.mock(DataAccess.class);</span>

<span class="fc" id="L21">	BLFacade sut = new BLFacadeImplementation(dataAccess);</span>
	
<span class="fc" id="L23">	private Event ev = new Event();</span>
	
	
	@DisplayName(&quot;Test 1: queries is null&quot;)
	@Test
	void testPaidUsersVectorOfQuestion1() {		

<span class="fc" id="L30">		Vector&lt;Question&gt; queries = null;</span>

		try {

<span class="pc" id="L34">			assertThrows(NullPointerException.class, ()-&gt; sut.paidUsers(queries));</span>

<span class="pc" id="L36">		} catch (RuntimeException e) {</span>
<span class="nc" id="L37">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);</span>
		}
<span class="fc" id="L39">	}</span>
	
	@DisplayName(&quot;Test 2: Querie have a null question&quot;)
	@Test
	void testPaidUsersVectorOfQuestion2() {
		try {


<span class="fc" id="L47">			Question q = null;</span>
<span class="fc" id="L48">			ArrayList&lt;Question&gt; qList = new ArrayList&lt;Question&gt;();</span>
<span class="fc" id="L49">			qList.add(q);</span>
<span class="fc" id="L50">			Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;(qList);</span>

			try {
				
<span class="fc" id="L54">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L55">				.getForecastsOfQuestion(Mockito.any(Question.class));</span>
<span class="fc" id="L56">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L57">				.paid(Mockito.anyString(), Mockito.anyDouble());</span>

<span class="pc" id="L59">				assertThrows(NullPointerException.class, ()-&gt; sut.paidUsers(queries));</span>

<span class="pc" id="L61">			} catch (NullPointerException e) {</span>
<span class="nc" id="L62">				fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>
			}
<span class="nc" id="L64">		} catch (RuntimeException e) {</span>
<span class="nc" id="L65">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);	</span>
		}

<span class="fc" id="L68">	}</span>
	
	@DisplayName(&quot;Test 3: Question do not have event&quot;)
	@Test
	void testPaidUsersVectorOfQuestion3() {
		try {

<span class="fc" id="L75">			Question q = new Question();</span>
<span class="fc" id="L76">			ArrayList&lt;Question&gt; qList = new ArrayList&lt;Question&gt;();</span>
<span class="fc" id="L77">			qList.add(q);</span>
<span class="fc" id="L78">			Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;(qList);</span>

			try {

<span class="fc" id="L82">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L83">				.getForecastsOfQuestion(Mockito.any(Question.class));</span>
<span class="fc" id="L84">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L85">				.paid(Mockito.anyString(), Mockito.anyDouble());</span>

<span class="pc" id="L87">				assertThrows(NullPointerException.class, ()-&gt; sut.paidUsers(queries));</span>

<span class="pc" id="L89">			} catch (NullPointerException e) {</span>
<span class="nc" id="L90">				fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>
			}
<span class="nc" id="L92">		} catch (RuntimeException e) {</span>
<span class="nc" id="L93">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);	</span>
		}

<span class="fc" id="L96">	}</span>
	
	@DisplayName(&quot;Test 4: Empty querie&quot;)
	@Test
	void testPaidUsersVectorOfQuestion4() {		

<span class="fc" id="L102">		Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;();;</span>

		try {

<span class="fc" id="L106">			sut.paidUsers(queries);</span>
			
<span class="fc" id="L108">			Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L109">			.getForecastsOfQuestion(Mockito.any(Question.class));</span>
<span class="fc" id="L110">			Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L111">			.paid(Mockito.anyString(), Mockito.anyDouble());</span>

<span class="pc" id="L113">		}catch (NullPointerException e) {</span>
<span class="nc" id="L114">			fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>

<span class="nc" id="L116">		} catch (RuntimeException e) {</span>
<span class="nc" id="L117">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);</span>
		}
<span class="fc" id="L119">	}</span>

	@DisplayName(&quot;Test 5: Question do not have any forecast&quot;)
	@Test
	void testPaidUsersVectorOfQuestion5() {
		try {

<span class="fc" id="L126">			Question q = new Question();</span>
<span class="fc" id="L127">			q.setEvent(ev);</span>
<span class="fc" id="L128">			ArrayList&lt;Question&gt; qList = new ArrayList&lt;Question&gt;();</span>
<span class="fc" id="L129">			qList.add(q);</span>
<span class="fc" id="L130">			Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;(qList);</span>
			
<span class="fc" id="L132">			ArrayList&lt;Forecast&gt; fList = new ArrayList&lt;Forecast&gt;();</span>
			
			try {



<span class="fc" id="L138">				ArgumentCaptor&lt;Question&gt; qCaptor = ArgumentCaptor.forClass(Question.class);</span>

<span class="fc" id="L140">				Mockito.doReturn(fList).when(dataAccess).getForecastsOfQuestion(qCaptor.capture());</span>

<span class="fc" id="L142">				sut.paidUsers(queries);</span>

<span class="fc" id="L144">				Mockito.verify(dataAccess,Mockito.times(1))</span>
<span class="fc" id="L145">				.getForecastsOfQuestion(Mockito.any(Question.class));</span>
				
<span class="fc" id="L147">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L148">				.paid(Mockito.anyString(), Mockito.anyDouble());</span>

<span class="fc" id="L150">				assertEquals(q, qCaptor.getValue());</span>

<span class="pc" id="L152">			} catch (NullPointerException e) {</span>
<span class="nc" id="L153">				fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>
			}
<span class="nc" id="L155">		} catch (RuntimeException e) {</span>
<span class="nc" id="L156">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);	</span>
		}

<span class="fc" id="L159">	}</span>
	
	

	
	
	@DisplayName(&quot;Test 6: Fail forecast&quot;)
	@Test
	void testPaidUsersVectorOfQuestion6() {
		try {


<span class="fc" id="L171">			Question q = new Question();</span>
<span class="fc" id="L172">			q.setResult(&quot;2&quot;);</span>
<span class="fc" id="L173">			q.setEvent(ev);</span>
<span class="fc" id="L174">			ArrayList&lt;Question&gt; qList = new ArrayList&lt;Question&gt;();</span>
<span class="fc" id="L175">			qList.add(q);</span>
<span class="fc" id="L176">			Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;(qList);	</span>
			
<span class="fc" id="L178">			Forecast f= new Forecast(q, 2, &quot;1&quot;, 2,&quot;Jon&quot;);</span>
<span class="fc" id="L179">			ArrayList&lt;Forecast&gt; fList = new ArrayList&lt;Forecast&gt;();</span>
<span class="fc" id="L180">			fList.add(f);</span>

			try {

<span class="fc" id="L184">				ArgumentCaptor&lt;Question&gt; qCaptor = ArgumentCaptor.forClass(Question.class);</span>

<span class="fc" id="L186">				Mockito.doReturn(fList).when(dataAccess).getForecastsOfQuestion(qCaptor.capture());</span>

<span class="fc" id="L188">				sut.paidUsers(queries);</span>

<span class="fc" id="L190">				Mockito.verify(dataAccess,Mockito.times(1))</span>
<span class="fc" id="L191">				.getForecastsOfQuestion(Mockito.any(Question.class));</span>
				
<span class="fc" id="L193">				Mockito.verify(dataAccess,Mockito.times(0))</span>
<span class="fc" id="L194">				.paid(Mockito.anyString(), Mockito.anyDouble());</span>
				
				
<span class="fc" id="L197">				assertEquals(q, qCaptor.getValue());</span>

<span class="pc" id="L199">			} catch (NullPointerException e) {</span>
<span class="nc" id="L200">				fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>
			}
<span class="nc" id="L202">		} catch (RuntimeException e) {</span>
<span class="nc" id="L203">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);	</span>
		}

<span class="fc" id="L206">	}</span>
	
	@DisplayName(&quot;Test 7: Gues forecast&quot;)
	@Test
	void testPaidUsersVectorOfQuestion7() {
		try {


<span class="fc" id="L214">			Question q = new Question();</span>
<span class="fc" id="L215">			q.setResult(&quot;2&quot;);</span>
<span class="fc" id="L216">			q.setEvent(ev);</span>
<span class="fc" id="L217">			Question q2 = new Question();</span>
<span class="fc" id="L218">			q2.setResult(&quot;2&quot;);</span>
<span class="fc" id="L219">			q2.setEvent(ev);</span>
<span class="fc" id="L220">			ArrayList&lt;Question&gt; qList = new ArrayList&lt;Question&gt;();</span>
<span class="fc" id="L221">			qList.add(q);</span>
<span class="fc" id="L222">			qList.add(q2);</span>
			
<span class="fc" id="L224">			Vector&lt;Question&gt; queries = new Vector&lt;Question&gt;(qList);</span>
			
			
<span class="fc" id="L227">			Forecast f= new Forecast(q, 2, &quot;1&quot;, 2,&quot;Jon&quot;);</span>
<span class="fc" id="L228">			Forecast f1= new Forecast(q2, 2, &quot;2&quot;, 2,&quot;Alfred&quot;);</span>
<span class="fc" id="L229">			Forecast f2= new Forecast(q2, 2, &quot;2&quot;, 2,&quot;James&quot;);</span>
<span class="fc" id="L230">			ArrayList&lt;Forecast&gt; fList = new ArrayList&lt;Forecast&gt;();</span>
<span class="fc" id="L231">			ArrayList&lt;Forecast&gt; fList2 = new ArrayList&lt;Forecast&gt;();</span>

<span class="fc" id="L233">			fList.add(f);</span>
<span class="fc" id="L234">			fList2.add(f1);</span>
<span class="fc" id="L235">			fList2.add(f2);</span>

			try {

<span class="fc" id="L239">				Mockito.doReturn(fList).when(dataAccess).getForecastsOfQuestion(q);</span>
<span class="fc" id="L240">				Mockito.doReturn(fList2).when(dataAccess).getForecastsOfQuestion(q2);</span>

<span class="fc" id="L242">				sut.paidUsers(queries);</span>

<span class="fc" id="L244">				Mockito.verify(dataAccess,Mockito.times(2))</span>
<span class="fc" id="L245">				.getForecastsOfQuestion(Mockito.any(Question.class));</span>
				
<span class="fc" id="L247">				Mockito.verify(dataAccess,Mockito.times(2))</span>
<span class="fc" id="L248">				.paid(Mockito.anyString(), Mockito.anyDouble());</span>
						

<span class="pc" id="L251">			} catch (NullPointerException e) {</span>
<span class="nc" id="L252">				fail(&quot;Mock DataAccess should not raise the exception NullPointerException&quot;);</span>
			}
<span class="nc" id="L254">		} catch (RuntimeException e) {</span>
<span class="nc" id="L255">			fail(&quot;Mock DataAccess should not raise the exception RuntimeException&quot;);	</span>
		}

<span class="fc" id="L258">	}</span>
	

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span>Bets (1 oct 2021 16:36:53)</div></body></html>